FROM golang:1.20
# validator build script

# creating new working dir in the container
WORKDIR /home/canine-node

RUN apt-get update

# installing git
RUN apt-get install git jq net-tools -y

# cloning the release version
ARG RELEASE
RUN git clone -b ${RELEASE} https://github.com/JackalLabs/canine-chain.git /home/canine-node

# installing the canine chain
RUN make install
# installing the canine binary
RUN go install /home/canine-node/cmd/canined

ARG NODE_SCRIPT=config-node.sh
# copying the node setup script 
COPY ${NODE_SCRIPT} /home/canine-node/scripts
RUN chmod +x /home/canine-node/scripts/${NODE_SCRIPT}

# keeping the container as an executable
CMD ["tail", "-f", "/dev/null" ]

# exposing ports for canine
EXPOSE 26657 26656 26658 1317 6060 9090 443